<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meet the Team | UBC Rover</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="team-page">

    <div id="bg-default"></div>
    
    <div id="bg-back"></div>
    
    <div id="bg-front"></div>

    <header>
        <div class="nav-container">
            <a href="index.html" class="logo">UBC ROVER</a>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="team.html" class="active">Meet the Team</a></li>
                    <li><a href="competitions.html">Competition</a></li>
                    <li><a href="join.html">Join Us</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="section">
        <h2 class="section-title hidden">Our Sub-Teams</h2>
        
        <div class="grid">
            <div class="card hidden" data-bg="images/team-chassis.jpg">
                <h3>Chassis</h3>
                <p>We shape the rover's mechanical backbone, creating a strong, lightweight platform for Mars-like terrains while integrating all subteams, and advancing mobility innovations, such as steerable wheels and waterproofing.</p>
            </div>
            
            <div class="card hidden" data-bg="images/team-arm.jpg">
                <h3>Arm</h3>
                <p>We develop a multi-axis robotic arm capable of high payload capacity, long reach, and fast end-effector swapping.</p>
            </div>
            
            <div class="card hidden" data-bg="images/team-arm.jpg">
                <h3>Rover Lab</h3>
                <p>We create and assemble automated onboard lab systems that collect soil samples, run chemical analyses, and search for signs of life—bringing fully autonomous science capabilities to a mobile rover.</p>
            </div>

            <div class="card hidden" data-bg="images/team-elec.jpg">
                <h3>Electrical</h3>
                <p>We power the rover's performance by designing reliable, safety-focused electronics—from motor control and power distribution to lighting and emergency systems—while building competition-ready PCBs for both the rover lab and Mini Rover.</p>
            </div>
            
            <div class="card hidden" data-bg="images/team-soft.jpg">
                <h3>Software</h3>
                <p>We build the software that runs and monitors the rover, focusing on reliable control systems, safety alerts, and advancing our Unity simulation used for testing and operator training.</p>
            </div>
            
            <div class="card hidden" data-bg="images/team-sci.jpg">
                <h3>Science</h3>
                <p>We design an autonomous life-detection lab for the rover, combining biochemical assays, custom instruments, microfluidic lab-on-a-chip systems, and computer vision to analyze Martian habitability with minimal samples.</p>
            </div>
            
            <div class="card hidden" data-bg="images/team-biz.jpg">
                <h3>Business</h3>
                <p>We keep the team running and growing by managing finances, sponsorships, and outreach, while promoting our work through marketing, events, and community engagement.</p>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2025 UBC Rover.</p>
    </footer>

    <script>
    // 1. SCROLL REVEAL
    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) entry.target.classList.add('show');
        });
    });
    document.querySelectorAll('.hidden').forEach((el) => observer.observe(el));

    // 2. BACKGROUND FADE LOGIC (Fixed for A -> B -> Exit bug)
    const bgBack = document.getElementById('bg-back');
    const bgFront = document.getElementById('bg-front');
    const cards = document.querySelectorAll('.card');
    
    let leaveTimer;

    cards.forEach(card => {
        card.addEventListener('mouseenter', () => {
            clearTimeout(leaveTimer); // Stop any "leave" actions if we moved to a new card quickly

            const newImage = card.getAttribute('data-bg');

            if (newImage) {
                // A. SETUP THE SNAPSHOT (BACK LAYER)
                // If the Front layer currently has an image visible, snapshot it to the Back layer
                if (bgFront.style.opacity === '1') {
                    bgBack.style.backgroundImage = bgFront.style.backgroundImage;
                    
                    // IMPORTANT: Force the Back layer to be visible immediately (no transition)
                    // This creates the solid base for the new image to fade over
                    bgBack.style.transition = 'none';
                    bgBack.style.opacity = '1';
                }

                // B. SETUP THE NEW IMAGE (FRONT LAYER)
                // Prepare Front layer to fade in
                bgFront.style.transition = 'none';
                bgFront.style.opacity = '0';
                bgFront.style.backgroundImage = `url('${newImage}')`;

                // Force browser reflow (the magic hack to reset animations)
                void bgFront.offsetWidth;

                // C. EXECUTE THE FADE
                bgFront.style.transition = 'opacity 0.5s ease-in-out';
                bgFront.style.opacity = '1';
            }
        });

        card.addEventListener('mouseleave', () => {
            // Delay the fade out slightly for smoothness
            leaveTimer = setTimeout(() => {
                // Fade out the Front Layer (Current Image)
                bgFront.style.opacity = '0';
                
                // NEW: Also fade out the Back Layer (Snapshot Image)
                // This ensures we reveal the Default Layer (bg-default) underneath
                bgBack.style.transition = 'opacity 0.5s ease-in-out';
                bgBack.style.opacity = '0';
                
            }, 50); 
        });
    });
</script>
</body>
</html>